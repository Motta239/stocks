import { useEffect, useState } from "react";
import { signIn, signOut, useSession } from "next-auth/react";
import { db } from "../firebaseConfig";
import { doc, onSnapshot } from "firebase/firestore";
import { FaUserAlt } from "react-icons/fa";
import { AiFillStar, AiOutlineForward } from "react-icons/ai";
import { BsFillGrid1X2Fill } from "react-icons/bs";
import { IoIosSearch } from "react-icons/io";
import StockCard from "./stockCard";
import NavBar from "./navBar";
const Home = () => {
  const { data: session } = useSession();
  const stocks3 = [
    "MULN",
    "AAPL",
    "AAON",
    "AB",
    "ABCB",
    "ABCL",
    "ABCM",
    "ACA",
    "ALHC",
    "AM",
    "AMC",
    "AMRC",
    "APP",
    "ARLP",
    "ARMK",
    "ARWR",
    "ASAN",
    "ASB",
    "ASND",
    "AWR",
    "AY",
    "BANR",
    "BB",
    "BCC",
    "BCPC",
    "BECN",
    "BILI",
    "BKH",
    "BWXT",
    "BXMT",
    "CACC",
    "CADE",
    "CATY",
    "CBZ",
    "CCCS",
    "CFLT",
    "CHRD",
    "CMTG",
    "COKE",
    "COLB",
    "CRC",
    "CSAN",
    "CVI",
    "CVLT",
    "CYBR",
    "DBRG",
    "DEI",
    "DEN",
    "DNUT",
    "DOCS",
    "DQ",
    "DRVN",
    "DY",
    "EQC",
    "ERF",
    "ESTC",
    "EXPO",
    "FBP",
    "FCFS",
    "FCN",
    "FFBC",
    "FFIN",
    "FFIV",
    "FIX",
    "FN",
    "FRME",
    "FULT",
    "FWRD",
    "GLNG",
    "GME",
    "GMED",
    "GO",
    "GPS",
    "HAS",
    "HI",
    "HMY",
    "HOMB",
    "HP",
    "HRB",
    "HTLF",
    "HWC",
    "IBOC",
    "IBTX",
    "ICL",
    "IFS",
    "IMCR",
    "INMD",
    "INSW",
    "ISEE",
    "JAZZ",
    "JBGS",
    "JWN",
    "KEP",
    "KEX",
    "KNSL",
    "KRC",
    "KRG",
    "KT",
    "LAC",
    "LAZR",
    "LEGN",
    "LIFW",
    "LII",
    "LNC",
    "LNTH",
    "MDU",
    "MGY",
    "MMSI",
    "MMYT",
    "MRTX",
    "MRVI",
    "MSM",
    "MTSI",
    "MUR",
    "MYOV",
    "NNI",
    "NOG",
    "NRG",
    "NSP",
    "NTLA",
    "NTNX",
    "OHI",
    "PBH",
    "PCVX",
    "PDCE",
    "PEB",
    "PHI",
    "PLXS",
    "PNFP",
    "POST",
    "PPBI",
    "PRMW",
    "PSLV",
    "PSO",
    "PSTG",
    "PYCR",
    "QDEL",
    "QLYS",
    "RBCP",
    "RDY",
    "RLI",
    "RLX",
    "RXO",
    "S",
    "SANM",
    "SAVE",
    "SBCF",
    "SBSW",
    "SFBS",
    "SGML",
    "SILK",
    "SITC",
    "SJW",
    "SKM",
    "SLGN",
    "SLM",
    "SON",
    "SSB",
    "STGW",
    "SWX",
    "TAL",
    "TFPM",
    "TGNA",
    "THG",
    "THS",
    "TNDM",
    "TTEK",
    "UBSI",
    "UMPQ",
    "UNFI",
    "VLY",
    "VSCO",
    "WBS",
    "WING",
    "WRK",
    "XENE",
    "XPEV",
    "YMM",
    "YOU",
    "ZIM",
    "ZWS",
    "ABBV",
    "AMZN",
    "ASML",
    "AVGO",
    "AZN",
    "BABA",
    "BAC",
    "BRK-A",
    "BRK-B",
    "COST",
    "CSCO",
    "CVX",
    "GOOG",
    "GOOGL",
    "HD",
    "JNJ",
    "JPM",
    "KO",
    "LLY",
    "MA",
    "META",
    "MRK",
    "MSFT",
    "NVDA",
    "NVO",
    "NVS",
    "ORCL",
    "PEP",
    "PFE",
    "PG",
    "SHEL",
    "TM",
    "TMO",
    "TSLA",
    "TSM",
    "UNH",
    "V",
    "WMT",
    "XOM",
    "A",
    "AAL",
    "ABB",
    "ABC",
    "ABEV",
    "ABNB",
    "ABT",
    "ACGL",
    "ACGLN",
    "ACI",
    "ACM",
    "ACN",
    "ADBE",
    "ADI",
    "ADM",
    "ADP",
    "ADSK",
    "AEE",
    "AEG",
    "AEM",
    "AEP",
    "AER",
    "AES",
    "AESC",
    "AFG",
    "AFL",
    "AGCO",
    "AGR",
    "AIG",
    "AJG",
    "AKAM",
    "ALB",
    "ALC",
    "ALGN",
    "ALL",
    "ALLE",
    "ALNY",
    "AMAT",
    "AMCR",
    "AMD",
    "AME",
    "AMGN",
    "AMH",
    "AMP",
    "AMT",
    "AMX",
    "ANET",
    "ANSS",
    "AON",
    "AOS",
    "APA",
    "APD",
    "APH",
    "APO",
    "APTV",
    "ARCC",
    "ARE",
    "ARES",
    "ARGX",
    "ASX",
    "ATO",
    "ATVI",
    "AVB",
    "AVTR",
    "AVY",
    "AWK",
    "AXON",
    "AXP",
    "AZO",
    "AZPN",
    "BA",
    "BAH",
    "BALL",
    "BAM",
    "BAP",
    "BATRA",
    "BATRK",
    "BAX",
    "BBD",
    "BBVA",
    "BBY",
    "BCE",
    "BCH",
    "BCS",
    "BDX",
    "BEKE",
    "BEN",
    "BF-A",
    "BF-B",
    "BG",
    "BGNE",
    "BHP",
    "BIDU",
    "BIIB",
    "BILL",
    "BIO",
    "BIP",
    "BJ",
    "BK",
    "BKI",
    "BKNG",
    "BKR",
    "BLDR",
    "BLK",
    "BMO",
    "BMRN",
    "BMY",
    "BN",
    "BNS",
    "BNTX",
    "BP",
    "BR",
    "BRKR",
    "BRO",
    "BSBR",
    "BSX",
    "BSY",
    "BTI",
    "BTO",
    "BUD",
    "BURL",
    "BWA",
    "BX",
    "BXP",
    "BZ",
    "C",
    "CAG",
    "CAH",
    "CAJ",
    "CAR",
    "CARR",
    "CAT",
    "CB",
    "CBOE",
    "CBRE",
    "CCEP",
    "CCI",
    "CCJ",
    "CCK",
    "CCL",
    "CDAY",
    "CDNS",
    "CDW",
    "CE",
    "CEG",
    "CF",
    "CFG",
    "CG",
    "CHD",
    "CHK",
    "CHKP",
    "CHRW",
    "CHT",
    "CHTR",
    "CHWY",
    "CI",
    "CINF",
    "CL",
    "CLF",
    "CLX",
    "CM",
    "CMCSA",
    "CME",
    "CMG",
    "CMI",
    "CMS",
    "CNA",
    "CNC",
    "CNHI",
    "CNI",
    "CNP",
    "CNQ",
    "COF",
    "COIN",
    "COO",
    "COP",
    "CP",
    "CPB",
    "CPNG",
    "CPRT",
    "CPT",
    "CQP",
    "CRBG",
    "CRH",
    "CRL",
    "CRM",
    "CRWD",
    "CS",
    "CSGP",
    "CSL",
    "CSX",
    "CTAS",
    "CTLT",
    "CTRA",
    "CTSH",
    "CTVA",
    "CUBE",
    "CUK",
    "CVE",
    "CVS",
    "CZR",
    "D",
    "DAL",
    "DAR",
    "DASH",
    "DB",
    "DD",
    "DDOG",
    "DE",
    "DECK",
    "DELL",
    "DEO",
    "DFS",
    "DG",
    "DGX",
    "DHI",
    "DHR",
    "DINO",
    "DIS",
    "DKS",
    "DLR",
    "DLTR",
    "DOCU",
    "DOV",
    "DOW",
    "DOX",
    "DPZ",
    "DRI",
    "DT",
    "DTE",
    "DUK",
    "DVN",
    "DXCM",
    "E",
    "EA",
    "EBAY",
    "EBR",
    "EBR-B",
    "EC",
    "ECL",
    "ED",
    "EDR",
    "EFX",
    "EIX",
    "EL",
    "ELS",
    "ELV",
    "EMN",
    "EMR",
    "ENB",
    "ENPH",
    "ENTG",
    "EOG",
    "EPAM",
    "EPD",
    "EQH",
    "EQIX",
    "EQNR",
    "EQR",
    "EQT",
    "ERIC",
    "ERIE",
    "ES",
    "ESS",
    "ET",
    "ETN",
    "ETR",
    "ETSY",
    "EVRG",
    "EW",
    "EWBC",
    "EXAS",
    "EXC",
    "EXPD",
    "EXPE",
    "EXR",
    "F",
    "FANG",
    "FAST",
    "FCNCA",
    "FCNCP",
    "FCX",
    "FDS",
    "FDX",
    "FE",
    "FERG",
    "FHN",
    "FICO",
    "FIS",
    "FISV",
    "FITB",
    "FIVE",
    "FLEX",
    "FLT",
    "FMC",
    "FMS",
    "FMX",
    "FND",
    "FNF",
    "FNV",
    "FOX",
    "FOXA",
    "FRC",
    "FSLR",
    "FTNT",
    "FTS",
    "FTV",
    "FWONA",
    "FWONK",
    "GD",
    "GDDY",
    "GE",
    "GEHC",
    "GEN",
    "GFL",
    "GFS",
    "GGG",
    "GIB",
    "GILD",
    "GIS",
    "GL",
    "GLPI",
    "GLW",
    "GM",
    "GMAB",
    "GOLD",
    "GPC",
    "GPN",
    "GRAB",
    "GRMN",
    "GS",
    "GSK",
    "GWW",
    "H",
    "HAL",
    "HBAN",
    "HBANP",
    "HCA",
    "HDB",
    "HEI",
    "HEI-A",
    "HES",
    "HIG",
    "HLN",
    "HLT",
    "HMC",
    "HOLX",
    "HON",
    "HPE",
    "HPQ",
    "HRL",
    "HSBC",
    "HSIC",
    "HST",
    "HSY",
    "HTHT",
    "HUBB",
    "HUBS",
    "HUM",
    "HWM",
    "HZNP",
    "IAU",
    "IBKR",
    "IBM",
    "IBN",
    "ICE",
    "ICLR",
    "IDXX",
    "IEP",
    "IEX",
    "IFF",
    "IHG",
    "ILMN",
    "IMO",
    "INCY",
    "INFY",
    "ING",
    "INTC",
    "INTU",
    "INVH",
    "IP",
    "IPG",
    "IQV",
    "IR",
    "IRM",
    "ISRG",
    "ISSC",
    "IT",
    "ITUB",
    "ITW",
    "IX",
    "J",
    "JBHT",
    "JBL",
    "JCI",
    "JD",
    "JKHY",
    "JNPR",
    "K",
    "KB",
    "KDP",
    "KEY",
    "KEYS",
    "KHC",
    "KIM",
    "KKR",
    "KLAC",
    "KMB",
    "KMI",
    "KMX",
    "KOF",
    "KR",
    "L",
    "LAMR",
    "LBRDA",
    "LBRDK",
    "LCID",
    "LDOS",
    "LECO",
    "LEN",
    "LEN-B",
    "LH",
    "LHX",
    "LI",
    "LIN",
    "LKQ",
    "LMT",
    "LNG",
    "LNT",
    "LOGI",
    "LOW",
    "LPLA",
    "LRCX",
    "LSCC",
    "LSI",
    "LSXMA",
    "LSXMK",
    "LULU",
    "LUV",
    "LVS",
    "LW",
    "LYB",
    "LYG",
    "LYV",
    "MAA",
    "MAR",
    "MAS",
    "MBLY",
    "MCD",
    "MCHP",
    "MCK",
    "MCO",
    "MDB",
    "MDLZ",
    "MDT",
    "MELI",
    "MET",
    "MFC",
    "MFG",
    "MGA",
    "MGM",
    "MKC",
    "MKL",
    "MKTX",
    "MLM",
    "MMC",
    "MMM",
    "MMP",
    "MNST",
    "MO",
    "MOH",
    "MORN",
    "MOS",
    "MPC",
    "MPLX",
    "MPWR",
    "MRNA",
    "MRO",
    "MRVL",
    "MS",
    "MSCI",
    "MSI",
    "MT",
    "MTB",
    "MTCH",
    "MTD",
    "MTN",
    "MU",
    "MUFG",
    "NDAQ",
    "NDSN",
    "NEE",
    "NEM",
    "NET",
    "NFLX",
    "NGG",
    "NI",
    "NICE",
    "NIMC",
    "NIO",
    "NKE",
    "NLY",
    "NMR",
    "NOC",
    "NOK",
    "NOW",
    "NSC",
    "NTAP",
    "NTES",
    "NTR",
    "NTRS",
    "NU",
    "NUE",
    "NVR",
    "NWG",
    "NWS",
    "NWSA",
    "NXPI",
    "O",
    "ODFL",
    "OKE",
    "OKTA",
    "OMC",
    "ON",
    "ORAN",
    "ORLY",
    "OTIS",
    "OVV",
    "OWL",
    "OXY",
    "PAG",
    "PANW",
    "PARA",
    "PARAP",
    "PAYC",
    "PAYX",
    "PBA",
    "PBR",
    "PBR-A",
    "PCAR",
    "PCG",
    "PCGU",
    "PCTY",
    "PDD",
    "PEAK",
    "PEG",
    "PEN",
    "PFG",
    "PGR",
    "PH",
    "PHG",
    "PHM",
    "PINS",
    "PKG",
    "PKI",
    "PKX",
    "PLD",
    "PLTR",
    "PM",
    "PNC",
    "PODD",
    "POOL",
    "PPG",
    "PPL",
    "PRU",
    "PSA",
    "PSNY",
    "PSX",
    "PTC",
    "PUK",
    "PWR",
    "PXD",
    "PYPL",
    "QCOM",
    "QGEN",
    "QRVO",
    "QSR",
    "RACE",
    "RBLX",
    "RCI",
    "RCL",
    "RE",
    "REG",
    "REGN",
    "RELX",
    "REXR",
    "RF",
    "RGEN",
    "RIO",
    "RIVN",
    "RJF",
    "RKT",
    "RMD",
    "ROK",
    "ROL",
    "ROP",
    "ROST",
    "RPM",
    "RPRX",
    "RRX",
    "RS",
    "RSG",
    "RTO",
    "RTX",
    "RY",
    "RYAAY",
    "RYAN",
    "SAN",
    "SAP",
    "SBAC",
    "SBUX",
    "SCCO",
    "SCHW",
    "SCI",
    "SE",
    "SEDG",
    "SGEN",
    "SHG",
    "SHOP",
    "SHW",
    "SIRI",
    "SIVB",
    "SJM",
    "SJR",
    "SLB",
    "SLF",
    "SMFG",
    "SNA",
    "SNAP",
    "SNN",
    "SNOW",
    "SNPS",
    "SNY",
    "SO",
    "SONY",
    "SPG",
    "SPGI",
    "SPLK",
    "SPOT",
    "SQ",
    "SQM",
    "SRE",
    "SRPT",
    "SSL",
    "SSNC",
    "STE",
    "STLA",
    "STLD",
    "STM",
    "STT",
    "STX",
    "STZ",
    "SU",
    "SUI",
    "SUZ",
    "SWK",
    "SWKS",
    "SYF",
    "SYK",
    "SYY",
    "T",
    "TAK",
    "TAP",
    "TCOM",
    "TD",
    "TDG",
    "TDY",
    "TEAM",
    "TECH",
    "TECK",
    "TEF",
    "TEL",
    "TER",
    "TEVA",
    "TFC",
    "TFII",
    "TFX",
    "TGT",
    "TJX",
    "TLK",
    "TME",
    "TMUS",
    "TOST",
    "TPG",
    "TPL",
    "TPR",
    "TRGP",
    "TRI",
    "TRMB",
    "TROW",
    "TRP",
    "TRU",
    "TRV",
    "TS",
    "TSCO",
    "TSN",
    "TT",
    "TTC",
    "TTD",
    "TTE",
    "TTWO",
    "TU",
    "TW",
    "TWLO",
    "TXN",
    "TXT",
    "TYL",
    "U",
    "UAL",
    "UBER",
    "UBS",
    "UDR",
    "UHAL",
    "UHAL-B",
    "UHS",
    "UI",
    "UL",
    "ULTA",
    "UMC",
    "UNP",
    "UPS",
    "URE",
    "URI",
    "USB",
    "UTHR",
    "VALE",
    "VEEV",
    "VFC",
    "VICI",
    "VIV",
    "VLO",
    "VMC",
    "VMW",
    "VOD",
    "VRSK",
    "VRSN",
    "VRTX",
    "VTR",
    "VTRS",
    "VZ",
    "WAB",
    "WAT",
    "WBA",
    "WBD",
    "WCN",
    "WDAY",
    "WDC",
    "WDS",
    "WEC",
    "WELL",
    "WES",
    "WFC",
    "WIT",
    "WLK",
    "WM",
    "WMB",
    "WMG",
    "WOLF",
    "WPC",
    "WPM",
    "WPP",
    "WRB",
    "WSC",
    "WSO",
    "WST",
    "WTRG",
    "WTW",
    "WY",
    "WYNN",
    "XEL",
    "XYL",
    "YUM",
    "YUMC",
    "Z",
    "ZBH",
    "ZBRA",
    "ZG",
    "ZI",
    "ZM",
    "ZS",
    "ZTO",
    "ZTS",
    "TSLA",
    "TQQQ",
    "SRNE",
    "GMBL",
    "SQQQ",
    "SPY",
    "XELA",
    "SOXL",
    "DKNG",
    "BOIL",
    "IBIO",
    "HYG",
    "BBBY",
    "PLTR",
    "AMZN",
    "AAPL",
    "WISH",
    "QQQ",
    "F",
    "SOXS",
    "FFIE",
    "UVXY",
    "AMD",
    "NVDA",
    "ARKK",
    "MARA",
    "SPRC",
    "NU",
    "UNG",
    "LABU",
    "NIO",
    "XLF",
    "SNAP",
    "FXI",
    "EEM",
    "SWN",
    "GOOGL",
    "XP",
    "INTC",
    "GOOG",
    "SOFI",
    "CCL",
    "T",
    "SPXU",
    "MSFT",
    "BAC",
    "SPXS",
    "SH",
    "UBER",
    "OPEN",
    "AMC",
    "HLBZ",
    "CS",
    "SHOP",
    "TSLL",
    "DVN",
    "PSQ",
    "CSCO",
    "DASH",
    "RIG",
    "IWM",
    "ITUB",
    "GDX",
    "AMCR",
    "COIN",
    "RBLX",
    "LUMN",
    "XLE",
    "META",
    "JNK",
    "LYFT",
    "AAL",
    "EWZ",
    "GOLD",
    "KMI",
    "XOM",
    "CVNA",
    "OXY",
    "KGC",
    "ROKU",
    "KWEB",
    "TELL",
    "TLT",
    "RIOT",
    "ARQQ",
    "DNA",
    "LQD",
    "PFE",
    "ISEE",
    "PARA",
    "TRKA",
    "BABA",
    "MRO",
    "GRAB",
    "TOST",
    "SIRI",
    "UUU",
    "AUY",
    "APE",
    "GOEV",
    "VALE",
    "KO",
    "RIVN",
    "BBD",
    "PBR",
    "AFRM",
    "AI",
    "BP",
    "LCID",
    "WBD",
    "IDEX",
    "SDOW",
    "EBET",
    "PYPL",
    "BITO",
    "SLV",
    "VZ",
    "PCG",
    "HUT",
    "TMF",
    "STEM",
    "NOK",
    "SI",
    "LU",
    "CTRA",
    "EFA",
    "NVOS",
    "CMCSA",
    "WFC",
    "MMAT",
    "ET",
    "SOUN",
    "SJNK",
    "MPW",
    "EOSE",
    "GM",
    "INZY",
    "SPCE",
    "LYG",
    "CSX",
    "HBAN",
    "JNJ",
    "C",
    "TLRY",
    "SPXL",
    "WMB",
    "FTI",
    "FTCH",
    "VXX",
    "DBX",
    "QID",
    "ABEV",
    "ABNB",
    "NCLH",
    "COP",
    "SQ",
    "XLP",
    "TSM",
    "BHC",
    "SABR",
    "FCX",
    "TZA",
    "XLU",
    "FSLY",
    "XLV",
    "MU",
    "PLUG",
    "BAX",
    "AEM",
    "CVE",
    "TNA",
    "IMPP",
    "BMY",
    "UPRO",
    "KHC",
    "NKLA",
    "QS",
    "HAL",
    "CVX",
    "MRK",
    "DIS",
    "BKR",
    "NEE",
    "HOOD",
    "TWLO",
    "EQT",
    "AMAT",
    "EXC",
    "PINS",
    "SLB",
    "HST",
    "XPEV",
    "DNB",
    "BRFS",
    "EMB",
    "XLI",
    "PTON",
    "HBI",
    "XBI",
  ];
  const user = session?.user?.email;
  const [searchTerm, setSearchTerm] = useState("");
  const [filteredItems, setFilteredItems] = useState(stocks3);
  const [frame, setFrame] = useState(true);
  const [numColumns, setNumColumns] = useState(1);
  const [active, setActive] = useState(false);
  const [active2, setActive2] = useState(true);
  const [screenResolution, setScreenResolution] = useState("");
  const [pageNum, setPageNum] = useState(0);
  const [info, setInfo] = useState();
  const list = info?.stock;
  const comments = info?.comments;
  useEffect(() => {
    getData();
  }, [session, db]);

  const getData = async () => {
    const unsub = onSnapshot(doc(db, "users", `${user}`), (doc) => {
      setInfo(doc.data());
    });
  };

  useEffect(() => {
    const handleResize = () => {
      setScreenResolution(window.innerWidth);
    };

    handleResize();

    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);
  useEffect(() => {
    screenResolution > 1042 ? setNumColumns(numColumns) : setNumColumns(1);
  }, [screenResolution]);
  console.log(screenResolution);
  const handleSearch = (e) => {
    const search = e.target.value;
    setSearchTerm(search);
    const filtered = stocks3
      .filter((item, index) => stocks3.indexOf(item) === index)
      .filter((item) => item.toLowerCase().includes(search.toLowerCase()));
    setFilteredItems(filtered);
  };

  return (
    <>
      <div className={`navRow h-fit px-5 justify-between shadow-2xl`}>
        <div className="flex">
          {!session ? (
            <div onClick={() => signIn()} className="navBtn">
              <FaUserAlt className="w-5 h-5" />
              <button className="hidden lg:inline-flex ">
                {screenResolution > 750 ? "Sign in" : ""}
              </button>
            </div>
          ) : (
            <div className="flex  navBtn justify-center items-center ">
              <img
                onClick={() => signOut()}
                className="profilePic"
                src={session.user.image}
                alt=""
              />
              <div className="hidden md:inline-flex">{session.user.name}</div>
            </div>
          )}
        </div>
        <div
          onClick={() => {
            setPageNum(0);
            setFilteredItems(list);
            setActive2(false);
          }}
          className="navBtn "
        >
          <div
            className={` ${
              !active2 ? "text-blue-500" : "text-stone-700"
            } hidden md:inline-flex`}
          >
            Favorites
          </div>
          <div className="relative  ">
            <AiFillStar
              className={`w-5 h-5 ${list?.length > 0 && "text-yellow-400"} `}
            />

            {list?.length > 0 && (
              <div className="bg-red-500 absolute rounded-full translate-x-2 -translate-y-8 text-xs items-center justify-center flex  h-5 w-5 shadow-2xl border-[0.5px] text-white font-semibold  ">
                {list?.length}
              </div>
            )}
          </div>
        </div>
        <div
          className={`${
            active2 && "text-blue-500"
          } cursor-pointer navBtn flex justify-center `}
          onClick={() => {
            setFilteredItems(stocks3);
            setActive2(true);
          }}
        >
          {screenResolution < 760 ? "ALL" : "All Stocks"}
        </div>
        <a className="navBtn    " onClick={() => setFrame(!frame)}>
          {frame === true ? "Daily" : "Weekly"}
        </a>
        <div className=" hidden active:text-white border-[0.5px] bg-white  md:inline-block relative hover:scale-110 hover:-translate-y-1  shadow-xl rounded-2xl tr300  ">
          {!searchTerm && (
            <div className=" ">
              <p className=" absolute  text-stone-700  rounded-lg  right-[50%]  transition-all ease-in duration-500 top-[26%] ">
                {" "}
                Ticker{" "}
              </p>
              <IoIosSearch className="absolute w-8 rounded-lg h-8 p-1 z-50 right-2 bg-slate-100 text-stone-700  transition-all ease-in duration-500 top-[17%] " />
            </div>
          )}
          <input
            className=" inputCss uppercase "
            type="text"
            value={searchTerm}
            onChange={handleSearch}
          />
        </div>
        <div
          onClick={() => setActive(true)}
          className="relative  navBtn  flex justify-center items-center "
        >
          <BsFillGrid1X2Fill
            className={`${active && "text-blue-500"} h-5 w-5  `}
          />
          {active && (
            <div
              onMouseLeave={() => setActive(false)}
              className="absolute rounded-xl  p-3 translate-y-[140px] bg-stone-100   items-center justify-center"
            >
              {[1, 2, 3].map((value) => (
                <button
                  key={value}
                  className={`h-10 w-10  backdrop-blur-2xl  hover:shadow-2xl border-[0.5px] rounded-full ${
                    numColumns === value
                      ? "text-white bg-blue-500 shadow-lg backdrop-blur-2xl "
                      : "backdrop-blur-2xl bg-slate-50 text-gray-700"
                  } border-2 border-gray-200 flex items-center justify-center focus:outline-none`}
                  onClick={() => setNumColumns(value)}
                >
                  {value}
                </button>
              ))}
            </div>
          )}
        </div>
      </div>
      <div className=" min-h-screen space-y-4  backdrop-blur-lg items-center justify-center h py-2">
        <div
          className={` mt-4 flex gap-4`}
          style={{
            display: "grid",
            gridTemplateColumns: `repeat(${numColumns}, 1fr)`,
          }}
        >
          {session &&
            filteredItems
              .slice(pageNum, pageNum + 20)

              .map((x, i) => (
                <StockCard
                  x={x}
                  i={i}
                  frame={frame}
                  list={list}
                  user={session.user.email}
                  info={info}
                  numColumns={numColumns}
                  width={pageNum}
                  comments={comments
                    ?.map((item) => item.stock == x && item.info)
                    .filter(Boolean)}
                />
              ))}
        </div>
      </div>
      <div className="flex items-center space-x-6 m-8 justify-center ">
        <AiOutlineForward
          onClick={() => {
            !pageNum == 0 && setPageNum(pageNum - 20);
            window.scrollTo({ top: 0, behavior: "smooth" });
          }}
          className="w-10 hover:text-blue-500  rotate-180 h-10"
        />
        <p>{pageNum + 20}</p>
        <AiOutlineForward
          className="w-10 hover:text-blue-500  h-10"
          onClick={() => {
            pageNum < stocks3.length && setPageNum(pageNum + 20);
            window.scrollTo({ top: 0, behavior: "auto" });
          }}
        />
      </div>
    </>
  );
};

export default Home;
